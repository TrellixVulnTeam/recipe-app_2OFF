{"ast":null,"code":"import { MEALS_ALL_CATEGORIES_ENDPOINT } from '../../services/meals';\nimport fetchAPI from '../../services';\nimport { finishedLoadingCategories, finishedLoadingRecipes, loadingCategories, loadingCategoriesFailed, loadingRecipes, loadingRecipesFailed } from './loadingAction';\nexport const SET_MEALS = 'SET_MEALS';\nexport const SET_SEARCH_BAR_MEALS = 'SET_SEARCH_BAR_MEALS';\nexport const SET_MEAL_DETAILS = 'SET_MEAL_DETAILS';\nexport const SET_MEAL_CATEGORIES = 'SET_MEAL_CATEGORIES';\nexport const CHANGE_MEAL_CATEGORY = 'CHANGE_MEAL_CATEGORY';\n\nfunction APIThunk(setter) {\n  return URL => async dispatch => {\n    dispatch(loadingRecipes(URL));\n\n    try {\n      const response = await fetchAPI(URL);\n      dispatch(setter(response.meals));\n    } catch (e) {\n      console.error(e);\n      dispatch(loadingRecipesFailed(e));\n    }\n\n    dispatch(finishedLoadingRecipes());\n  };\n}\n\nfunction setMeals(payload) {\n  return {\n    type: SET_MEALS,\n    payload\n  };\n}\n\nfunction setSearchBarMeals(payload) {\n  return {\n    type: SET_SEARCH_BAR_MEALS,\n    payload\n  };\n}\n\nfunction setMealDetails(payload) {\n  return {\n    type: SET_MEAL_DETAILS,\n    payload\n  };\n}\n\nexport const getFoodRecipesAPIThunk = APIThunk(setMeals);\nexport const getFoodSearchBarAPIThunk = APIThunk(setSearchBarMeals);\nexport const getFoodDetailsAPIThunk = APIThunk(setMealDetails);\n\nfunction setCategories(payload) {\n  return {\n    type: SET_MEAL_CATEGORIES,\n    payload\n  };\n}\n\nexport function getFoodCategoriesAPIThunk() {\n  const LAST_CATEGORY_INDEX = 5;\n\n  const onlyTheFirst5 = (_recipe, index) => index < LAST_CATEGORY_INDEX;\n\n  return async dispatch => {\n    dispatch(loadingCategories());\n\n    try {\n      const response = await fetchAPI(MEALS_ALL_CATEGORIES_ENDPOINT);\n      dispatch(setCategories(response.meals.filter(onlyTheFirst5)));\n    } catch (e) {\n      console.error(e);\n      dispatch(loadingCategoriesFailed(e));\n    }\n\n    dispatch(finishedLoadingCategories());\n  };\n}\nexport function changeCategory(payload) {\n  return {\n    type: CHANGE_MEAL_CATEGORY,\n    payload\n  };\n}","map":{"version":3,"sources":["/Users/beatrizbarbosa/Projects/trybe-projects/sd-010-a-project-recipes-app/src/redux/actions/mealsAction.js"],"names":["MEALS_ALL_CATEGORIES_ENDPOINT","fetchAPI","finishedLoadingCategories","finishedLoadingRecipes","loadingCategories","loadingCategoriesFailed","loadingRecipes","loadingRecipesFailed","SET_MEALS","SET_SEARCH_BAR_MEALS","SET_MEAL_DETAILS","SET_MEAL_CATEGORIES","CHANGE_MEAL_CATEGORY","APIThunk","setter","URL","dispatch","response","meals","e","console","error","setMeals","payload","type","setSearchBarMeals","setMealDetails","getFoodRecipesAPIThunk","getFoodSearchBarAPIThunk","getFoodDetailsAPIThunk","setCategories","getFoodCategoriesAPIThunk","LAST_CATEGORY_INDEX","onlyTheFirst5","_recipe","index","filter","changeCategory"],"mappings":"AAAA,SAASA,6BAAT,QAA8C,sBAA9C;AACA,OAAOC,QAAP,MAAqB,gBAArB;AACA,SACEC,yBADF,EAEEC,sBAFF,EAGEC,iBAHF,EAIEC,uBAJF,EAKEC,cALF,EAMEC,oBANF,QAM8B,iBAN9B;AAQA,OAAO,MAAMC,SAAS,GAAG,WAAlB;AACP,OAAO,MAAMC,oBAAoB,GAAG,sBAA7B;AACP,OAAO,MAAMC,gBAAgB,GAAG,kBAAzB;AACP,OAAO,MAAMC,mBAAmB,GAAG,qBAA5B;AACP,OAAO,MAAMC,oBAAoB,GAAG,sBAA7B;;AAEP,SAASC,QAAT,CAAkBC,MAAlB,EAA0B;AACxB,SAAQC,GAAD,IAAS,MAAOC,QAAP,IAAoB;AAClCA,IAAAA,QAAQ,CAACV,cAAc,CAACS,GAAD,CAAf,CAAR;;AACA,QAAI;AACF,YAAME,QAAQ,GAAG,MAAMhB,QAAQ,CAACc,GAAD,CAA/B;AACAC,MAAAA,QAAQ,CAACF,MAAM,CAACG,QAAQ,CAACC,KAAV,CAAP,CAAR;AACD,KAHD,CAGE,OAAOC,CAAP,EAAU;AACVC,MAAAA,OAAO,CAACC,KAAR,CAAcF,CAAd;AACAH,MAAAA,QAAQ,CAACT,oBAAoB,CAACY,CAAD,CAArB,CAAR;AACD;;AACDH,IAAAA,QAAQ,CAACb,sBAAsB,EAAvB,CAAR;AACD,GAVD;AAWD;;AACD,SAASmB,QAAT,CAAkBC,OAAlB,EAA2B;AACzB,SAAO;AACLC,IAAAA,IAAI,EAAEhB,SADD;AAELe,IAAAA;AAFK,GAAP;AAID;;AACD,SAASE,iBAAT,CAA2BF,OAA3B,EAAoC;AAClC,SAAO;AACLC,IAAAA,IAAI,EAAEf,oBADD;AAELc,IAAAA;AAFK,GAAP;AAID;;AACD,SAASG,cAAT,CAAwBH,OAAxB,EAAiC;AAC/B,SAAO;AACLC,IAAAA,IAAI,EAAEd,gBADD;AAELa,IAAAA;AAFK,GAAP;AAID;;AACD,OAAO,MAAMI,sBAAsB,GAAGd,QAAQ,CAACS,QAAD,CAAvC;AACP,OAAO,MAAMM,wBAAwB,GAAGf,QAAQ,CAACY,iBAAD,CAAzC;AACP,OAAO,MAAMI,sBAAsB,GAAGhB,QAAQ,CAACa,cAAD,CAAvC;;AAEP,SAASI,aAAT,CAAuBP,OAAvB,EAAgC;AAC9B,SAAO;AACLC,IAAAA,IAAI,EAAEb,mBADD;AAELY,IAAAA;AAFK,GAAP;AAID;;AACD,OAAO,SAASQ,yBAAT,GAAqC;AAC1C,QAAMC,mBAAmB,GAAG,CAA5B;;AACA,QAAMC,aAAa,GAAG,CAACC,OAAD,EAAUC,KAAV,KAAoBA,KAAK,GAAGH,mBAAlD;;AACA,SAAO,MAAOhB,QAAP,IAAoB;AACzBA,IAAAA,QAAQ,CAACZ,iBAAiB,EAAlB,CAAR;;AACA,QAAI;AACF,YAAMa,QAAQ,GAAG,MAAMhB,QAAQ,CAACD,6BAAD,CAA/B;AACAgB,MAAAA,QAAQ,CAACc,aAAa,CAACb,QAAQ,CAACC,KAAT,CAAekB,MAAf,CAAsBH,aAAtB,CAAD,CAAd,CAAR;AACD,KAHD,CAGE,OAAOd,CAAP,EAAU;AACVC,MAAAA,OAAO,CAACC,KAAR,CAAcF,CAAd;AACAH,MAAAA,QAAQ,CAACX,uBAAuB,CAACc,CAAD,CAAxB,CAAR;AACD;;AACDH,IAAAA,QAAQ,CAACd,yBAAyB,EAA1B,CAAR;AACD,GAVD;AAWD;AAED,OAAO,SAASmC,cAAT,CAAwBd,OAAxB,EAAiC;AACtC,SAAO;AACLC,IAAAA,IAAI,EAAEZ,oBADD;AAELW,IAAAA;AAFK,GAAP;AAID","sourcesContent":["import { MEALS_ALL_CATEGORIES_ENDPOINT } from '../../services/meals';\nimport fetchAPI from '../../services';\nimport {\n  finishedLoadingCategories,\n  finishedLoadingRecipes,\n  loadingCategories,\n  loadingCategoriesFailed,\n  loadingRecipes,\n  loadingRecipesFailed } from './loadingAction';\n\nexport const SET_MEALS = 'SET_MEALS';\nexport const SET_SEARCH_BAR_MEALS = 'SET_SEARCH_BAR_MEALS';\nexport const SET_MEAL_DETAILS = 'SET_MEAL_DETAILS';\nexport const SET_MEAL_CATEGORIES = 'SET_MEAL_CATEGORIES';\nexport const CHANGE_MEAL_CATEGORY = 'CHANGE_MEAL_CATEGORY';\n\nfunction APIThunk(setter) {\n  return (URL) => async (dispatch) => {\n    dispatch(loadingRecipes(URL));\n    try {\n      const response = await fetchAPI(URL);\n      dispatch(setter(response.meals));\n    } catch (e) {\n      console.error(e);\n      dispatch(loadingRecipesFailed(e));\n    }\n    dispatch(finishedLoadingRecipes());\n  };\n}\nfunction setMeals(payload) {\n  return {\n    type: SET_MEALS,\n    payload,\n  };\n}\nfunction setSearchBarMeals(payload) {\n  return {\n    type: SET_SEARCH_BAR_MEALS,\n    payload,\n  };\n}\nfunction setMealDetails(payload) {\n  return {\n    type: SET_MEAL_DETAILS,\n    payload,\n  };\n}\nexport const getFoodRecipesAPIThunk = APIThunk(setMeals);\nexport const getFoodSearchBarAPIThunk = APIThunk(setSearchBarMeals);\nexport const getFoodDetailsAPIThunk = APIThunk(setMealDetails);\n\nfunction setCategories(payload) {\n  return {\n    type: SET_MEAL_CATEGORIES,\n    payload,\n  };\n}\nexport function getFoodCategoriesAPIThunk() {\n  const LAST_CATEGORY_INDEX = 5;\n  const onlyTheFirst5 = (_recipe, index) => index < LAST_CATEGORY_INDEX;\n  return async (dispatch) => {\n    dispatch(loadingCategories());\n    try {\n      const response = await fetchAPI(MEALS_ALL_CATEGORIES_ENDPOINT);\n      dispatch(setCategories(response.meals.filter(onlyTheFirst5)));\n    } catch (e) {\n      console.error(e);\n      dispatch(loadingCategoriesFailed(e));\n    }\n    dispatch(finishedLoadingCategories());\n  };\n}\n\nexport function changeCategory(payload) {\n  return {\n    type: CHANGE_MEAL_CATEGORY,\n    payload,\n  };\n}\n"]},"metadata":{},"sourceType":"module"}