{"ast":null,"code":"var _jsxFileName = \"/Users/beatrizbarbosa/Projects/trybe-projects/sd-010-a-project-recipes-app/src/components/Recipe/FavoriteMeal.js\";\nimport React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { useParams } from 'react-router-dom';\nimport { head } from 'lodash-es';\nimport blackHeart from \"../../images/blackHeartIcon.svg\";\nimport whiteHeart from \"../../images/whiteHeartIcon.svg\";\nconst FAVORITE_RECIPES = 'favoriteRecipes';\n\nfunction removeFromFavorites(id) {\n  const favoriteRecipes = JSON.parse(localStorage.getItem(FAVORITE_RECIPES));\n  localStorage.setItem(FAVORITE_RECIPES, JSON.stringify(favoriteRecipes.filter(recipe => recipe.id !== id)));\n}\n\nfunction addToFavorites(mealDetails) {\n  const favoriteRecipes = JSON.parse(localStorage.getItem(FAVORITE_RECIPES)) || [];\n  const {\n    idMeal: id,\n    strArea: area,\n    strCategory: category,\n    strMealThumb: image,\n    strMeal: name\n  } = head(mealDetails);\n  localStorage.setItem(FAVORITE_RECIPES, JSON.stringify([...favoriteRecipes, {\n    id,\n    area,\n    category,\n    image,\n    name,\n    alcoholicOrNot: '',\n    type: 'comida'\n  }]));\n}\n\nfunction Favorite() {\n  const [isFavorite, setIsFavorite] = useState(null);\n  const {\n    id\n  } = useParams();\n  useEffect(() => {\n    const favoriteRecipes = JSON.parse(localStorage.getItem(FAVORITE_RECIPES));\n    setIsFavorite(favoriteRecipes && favoriteRecipes.some(recipe => Number(recipe.id) === Number(id)));\n  }, [id]);\n  const mealDetails = useSelector(state => state.meals.mealDetails);\n\n  function toggleStatus() {\n    if (isFavorite) {\n      setIsFavorite(false);\n      return removeFromFavorites(id);\n    }\n\n    setIsFavorite(true);\n    return addToFavorites(mealDetails);\n  }\n\n  return /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    \"data-testid\": \"favorite-btn\",\n    className: \"icones-btn\",\n    src: isFavorite ? blackHeart : whiteHeart,\n    onClick: toggleStatus,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: isFavorite ? blackHeart : whiteHeart,\n    alt: \"Favoritar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }));\n}\n\nexport default Favorite;","map":{"version":3,"sources":["/Users/beatrizbarbosa/Projects/trybe-projects/sd-010-a-project-recipes-app/src/components/Recipe/FavoriteMeal.js"],"names":["React","useEffect","useState","useSelector","useParams","head","FAVORITE_RECIPES","removeFromFavorites","id","favoriteRecipes","JSON","parse","localStorage","getItem","setItem","stringify","filter","recipe","addToFavorites","mealDetails","idMeal","strArea","area","strCategory","category","strMealThumb","image","strMeal","name","alcoholicOrNot","type","Favorite","isFavorite","setIsFavorite","some","Number","state","meals","toggleStatus","blackHeart","whiteHeart"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { useParams } from 'react-router-dom';\nimport { head } from 'lodash-es';\n\nimport blackHeart from '../../images/blackHeartIcon.svg';\nimport whiteHeart from '../../images/whiteHeartIcon.svg';\n\nconst FAVORITE_RECIPES = 'favoriteRecipes';\nfunction removeFromFavorites(id) {\n  const favoriteRecipes = JSON.parse(localStorage.getItem(FAVORITE_RECIPES));\n  localStorage.setItem(\n    FAVORITE_RECIPES, JSON.stringify(\n      favoriteRecipes.filter((recipe) => recipe.id !== id),\n    ),\n  );\n}\nfunction addToFavorites(mealDetails) {\n  const favoriteRecipes = JSON.parse(localStorage.getItem(FAVORITE_RECIPES)) || [];\n  const { idMeal: id,\n    strArea: area,\n    strCategory: category,\n    strMealThumb: image,\n    strMeal: name } = head(mealDetails);\n  localStorage.setItem(\n    FAVORITE_RECIPES, JSON.stringify(\n      [...favoriteRecipes, {\n        id,\n        area,\n        category,\n        image,\n        name,\n        alcoholicOrNot: '',\n        type: 'comida' }],\n    ),\n  );\n}\n\nfunction Favorite() {\n  const [isFavorite, setIsFavorite] = useState(null);\n  const { id } = useParams();\n  useEffect(() => {\n    const favoriteRecipes = JSON.parse(localStorage.getItem(FAVORITE_RECIPES));\n    setIsFavorite(favoriteRecipes && favoriteRecipes\n      .some((recipe) => Number(recipe.id) === Number(id)));\n  }, [id]);\n  const mealDetails = useSelector((state) => state.meals.mealDetails);\n\n  function toggleStatus() {\n    if (isFavorite) {\n      setIsFavorite(false);\n      return removeFromFavorites(id);\n    }\n    setIsFavorite(true);\n    return addToFavorites(mealDetails);\n  }\n  return (\n    <button\n      type=\"button\"\n      data-testid=\"favorite-btn\"\n      className=\"icones-btn\"\n      src={ isFavorite ? blackHeart : whiteHeart }\n      onClick={ toggleStatus }\n    >\n      <img src={ isFavorite ? blackHeart : whiteHeart } alt=\"Favoritar\" />\n    </button>\n  );\n}\n\nexport default Favorite;\n"]},"metadata":{},"sourceType":"module"}